<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Experiments Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .json-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
        .data-card { background: #f9fafb; border: 1px solid #e5e7eb; padding: 1rem; border-radius: 0.5rem; }
        .experiment-image { 
            width: 100%; 
            max-height: 500px; 
            object-fit: cover; 
            border-radius: 0.75rem; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .map-container {
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans leading-normal">

    <header class="bg-indigo-900 text-white py-16 px-6 text-center">
        <h1 class="text-4xl font-bold mb-4">Digital Experiments: Collections & Geospatial Analysis</h1>
        <p class="text-xl text-indigo-200">A modular record of data linking, mapping, and analytics experiments.</p>
    </header>

    <main class="max-w-5xl mx-auto py-12 px-6 space-y-24">

        <section id="experiment-a">
            <div class="border-l-4 border-indigo-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">A) Adding coordinates to Places table</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Linking Place data to Getty identifiers, which enabled the addition of longitude and latitude coordinates to the place entries. This enables geospatial analysis of the Place table composition as well as the geospatial analysis of all objects linked to those place names.
                </p>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h4 class="font-bold text-indigo-800 mb-2">Future Work:</h4>
                    <ul class="text-indigo-900 text-sm list-disc ml-5 space-y-1">
                        <li>Extending the linkages to other services (NLS historic maps, UK Data Service, etc.).</li>
                        <li>Creating a search app that compares retrieved information from multiple geocoding services.</li>
                        <li>Setting up connections with HeritageGateway.</li>
                    </ul>
                </div>
            </div>

            <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Dataset Sample: places.json</h3>
            <div id="places-container" class="json-grid">
                <div class="animate-pulse text-gray-400">Loading dataset...</div>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-b-c">
            <div class="border-l-4 border-emerald-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">B & C) Mapping & Museum Counts</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Maps were created to show the locations of objects based on the "place made" field content, allowing for analysis of the distribution of object origins. Visualisations also show the distribution of objects across various countries.
                </p>
                <div class="bg-emerald-50 p-4 rounded-lg">
                    <h4 class="font-bold text-emerald-800 mb-2">Future Work:</h4>
                    <p class="text-emerald-900 italic text-sm">Extracting and visualising location information mentioned in other fields and gamification for exploring objects through maps.</p>
                </div>
            </div>

            <div class="map-container">
                <iframe width="100%" height="488" frameborder="0" title="Felt Map" src="https://felt.com/embed/map/OBJECT-Table-SHARED-8gs747UFTFiPJsjkyXRxFB?loc=27.1%2C9.3%2C1.18z&legend=1&cooperativeGestures=1&link=1&geolocation=0&zoomControls=1&scaleBar=1" referrerpolicy="strict-origin-when-cross-origin"></iframe>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-d">
            <div class="border-l-4 border-orange-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">D) Google Analytics Integration</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Combined visitor numbers with geocoded location information to show whether individuals from different countries viewed objects made in their own countries or elsewhere.
                </p>
                <div class="bg-orange-50 p-4 rounded-lg mb-8">
                    <h4 class="font-bold text-orange-800 mb-2">Future Work:</h4>
                    <p class="text-orange-900 italic text-sm">Enhancing the visualisation by integrating real-time information and exploring other monitoring tools.</p>
                </div>
            </div>

            <div class="mt-6">
                <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Visualization Output: kepler.gl.png</h3>
                <img src="kepler.gl.png" alt="Kepler.gl visualization" class="experiment-image">
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-e" class="pb-20">
            <div class="border-l-4 border-blue-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">E) Railway posters locations information</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Mentions of advertised travel destinations were extracted from metadata related to a sub-set of railway posters. The extracted information was then visualised on a map.
                </p>
                <div class="bg-blue-50 p-4 rounded-lg mb-8">
                    <h4 class="font-bold text-blue-800 mb-2">Future Work:</h4>
                    <ul class="text-blue-900 text-sm list-disc ml-5 space-y-1">
                        <li>Extracting information from the full set of railway posters and visual materials.</li>
                        <li>Identifying other sub-collections that can be similarly visualised.</li>
                        <li>Experimenting with better approaches to visualising objects with multiple locations included within their metadata.</li>
                    </ul>
                </div>
            </div>

            <div class="map-container">
                <iframe width="100%" height="488" frameborder="0" title="Felt Map" src="https://felt.com/embed/map/NRM-Railway-Travel-Posters-VsU3e0fJTB6ZdU69AFXaUjC?loc=53.683%2C-4.166%2C5.6z&legend=1&cooperativeGestures=1&link=1&geolocation=0&zoomControls=1&scaleBar=1" referrerpolicy="strict-origin-when-cross-origin"></iframe>
            </div>
        </section>

    </main>

    <script>
        async function loadPlaces() {
    try {
        const response = await fetch('places.json');
        
        if (!response.ok) throw new Error('Network response was not ok');
        
        // 1. Read the file as raw text string
        const text = await response.text();
        
        // 2. Globally replace the invalid NaN tokens with null
        // This handles cases like: "PLACE.PLACE2": NaN,
        const cleanText = text.replace(/:\s*NaN/g, ': null');
        
        // 3. Parse the cleaned string into a JSON object
        const data = JSON.parse(cleanText);
        
        const container = document.getElementById('places-container');
        container.innerHTML = ''; 

        // 4. Render the data
        data.slice(0, 6).forEach(item => {
            const card = document.createElement('div');
            card.className = 'data-card text-sm';
            card.innerHTML = `
                <p class="font-bold text-indigo-700 text-base">${item['PLACE.PLACE1'] || 'Unknown'}</p>
                <p class="text-gray-500 italic mb-2">${item['PLACE.DESCRIPTION'] || 'No description available'}</p>
                <div class="grid grid-cols-2 gap-1 text-xs">
                    <span class="text-gray-400 font-medium">Coordinates:</span> 
                    <span>${item.Latitude ?? 'N/A'}, ${item.Longitude ?? 'N/A'}</span>
                    <span class="text-gray-400 font-medium">Getty ID:</span> 
                    <a href="${item.LINK || '#'}" target="_blank" class="text-blue-500 hover:underline">
                        ${item.TGN_ID2 || 'View Link'}
                    </a>
                </div>
            `;
            container.appendChild(card);
        });
    } catch (error) {
        console.error('Final Error Catch:', error);
        document.getElementById('places-container').innerHTML = 
            `<p class="text-red-500">Error loading data sample: ${error.message}</p>`;
    }
}
        loadPlaces();
    </script>
</body>
</html>
