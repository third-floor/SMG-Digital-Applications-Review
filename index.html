<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Experiments Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .json-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; }
        .data-card { background: #f9fafb; border: 1px solid #e5e7eb; padding: 1rem; border-radius: 0.5rem; }
        .experiment-image { 
            width: 100%; 
            max-height: 500px; 
            object-fit: cover; 
            border-radius: 0.75rem; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .map-container {
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans leading-normal">

    <header class="bg-indigo-900 text-white py-16 px-6 text-center">
        <h1 class="text-4xl font-bold mb-4">Digital Experiments: Collections & Geospatial Analysis</h1>
        <p class="text-xl text-indigo-200">A modular record of data linking, mapping, and analytics experiments.</p>
    </header>

    <main class="max-w-5xl mx-auto py-12 px-6 space-y-24">

        <section id="experiment-a">
            <div class="border-l-4 border-indigo-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">A) Adding coordinates to Places table</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Linking Place data to Getty identifiers, which enabled the addition of longitude and latitude coordinates to the place entries. This enables geospatial analysis of the Place table composition as well as the geospatial analysis of all objects linked to those place names.
                </p>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h4 class="font-bold text-indigo-800 mb-2">Future Work:</h4>
                    <ul class="text-indigo-900 text-sm list-disc ml-5 space-y-1">
                        <li>Extending the linkages to other services (NLS historic maps, UK Data Service, etc.).</li>
                        <li>Creating a search app that compares retrieved information from multiple geocoding services.</li>
                        <li>Setting up connections with HeritageGateway.</li>
                    </ul>
                </div>
            </div>

            <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Dataset Sample: places.json</h3>
            <div id="places-container" class="json-grid">
                <div class="animate-pulse text-gray-400">Loading dataset...</div>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-b-c">
            <div class="border-l-4 border-emerald-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">B & C) Mapping & Museum Counts</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Maps were created to show the locations of objects based on the "place made" field content, allowing for analysis of the distribution of object origins. Visualisations also show the distribution of objects across various countries.
                </p>
                <div class="bg-emerald-50 p-4 rounded-lg">
                    <h4 class="font-bold text-emerald-800 mb-2">Future Work:</h4>
                    <p class="text-emerald-900 italic text-sm">Extracting and visualising location information mentioned in other fields and gamification for exploring objects through maps.</p>
                </div>
            </div>

            <div class="map-container">
                <iframe width="100%" height="488" frameborder="0" title="Felt Map" src="https://felt.com/embed/map/OBJECT-Table-SHARED-8gs747UFTFiPJsjkyXRxFB?loc=27.1%2C9.3%2C1.18z&legend=1&cooperativeGestures=1&link=1&geolocation=0&zoomControls=1&scaleBar=1" referrerpolicy="strict-origin-when-cross-origin"></iframe>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-d">
            <div class="border-l-4 border-orange-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">D) Google Analytics Integration</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Combined visitor numbers with geocoded location information to show whether individuals from different countries viewed objects made in their own countries or elsewhere.
                </p>
                <div class="bg-orange-50 p-4 rounded-lg mb-8">
                    <h4 class="font-bold text-orange-800 mb-2">Future Work:</h4>
                    <p class="text-orange-900 italic text-sm">Enhancing the visualisation by integrating real-time information and exploring other monitoring tools.</p>
                </div>
            </div>

            <div class="mt-6">
                <h3 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Visualization Output: kepler.gl.png</h3>
                <img src="kepler.gl.png" alt="Kepler.gl visualization" class="experiment-image">
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="experiment-e" class="pb-20">
            <div class="border-l-4 border-blue-600 pl-6 mb-8">
                <h2 class="text-3xl font-bold mb-4">E) Railway posters locations information</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Mentions of advertised travel destinations were extracted from metadata related to a sub-set of railway posters. The extracted information was then visualised on a map.
                </p>
                <div class="bg-blue-50 p-4 rounded-lg mb-8">
                    <h4 class="font-bold text-blue-800 mb-2">Future Work:</h4>
                    <ul class="text-blue-900 text-sm list-disc ml-5 space-y-1">
                        <li>Extracting information from the full set of railway posters and visual materials.</li>
                        <li>Identifying other sub-collections that can be similarly visualised.</li>
                        <li>Experimenting with better approaches to visualising objects with multiple locations included within their metadata.</li>
                    </ul>
                </div>
            </div>

            <div class="map-container">
                <iframe width="100%" height="488" frameborder="0" title="Felt Map" src="https://felt.com/embed/map/NRM-Railway-Travel-Posters-VsU3e0fJTB6ZdU69AFXaUjC?loc=53.683%2C-4.166%2C5.6z&legend=1&cooperativeGestures=1&link=1&geolocation=0&zoomControls=1&scaleBar=1" referrerpolicy="strict-origin-when-cross-origin"></iframe>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="section-2" class="pb-20">
            <h2 class="text-4xl font-bold mb-12 text-indigo-900">2. Authority Files & Data Linking</h2>

            <div class="mb-16">
                <div class="border-l-4 border-purple-600 pl-6 mb-6">
                    <h3 class="text-2xl font-bold mb-3">A) Search Across External Collections</h3>
                    <p class="text-gray-700 mb-4">
                        A script was written to query search terms across publicly available authority files of other GLAM institutions to review different institutional approaches.
                    </p>
                    <div class="bg-purple-50 p-4 rounded-lg text-sm italic text-purple-900">
                        <strong>Future Work:</strong> Making the script robust for parallel searches and expanding it to search catalogue items beyond authority records.
                    </div>
                </div>
                <a href="https://github.com/third-floor/SMG-Digital-Applications_review/blob/main/2_A_Authority_Records_Search_Across_External_Collections.ipynb" 
                   target="_blank" 
                   class="inline-flex items-center px-4 py-2 bg-gray-800 text-white rounded hover:bg-black transition">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.041-1.412-4.041-1.412-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    View Jupyter Notebook on GitHub
                </a>
            </div>

            <div class="mb-16">
                <div class="border-l-4 border-blue-600 pl-6 mb-6">
                    <h3 class="text-2xl font-bold mb-3">B) Royal Society Past Fellows Dataset</h3>
                    <p class="text-gray-700 mb-4">
                        Identified 967 matches across Collections Online and the RS Past Fellows dataset. 
                        This revealed 107 entries with mismatched or missing birth/death dates and enabled the addition of approximately 700 identifiers to Wikidata.
                    </p>
                </div>
                <div id="rs-fellows-container" class="json-grid">
                    <div class="animate-pulse text-gray-400">Loading matches...</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-16">
                <div class="bg-gray-100 p-6 rounded-xl">
                    <h3 class="font-bold text-xl mb-3 text-gray-800">C) Whipple Collections</h3>
                    <p class="text-sm text-gray-600">
                        While an export was provided, the lack of authority files within the dataset necessitates a large deduplication task before digital work can proceed.
                    </p>
                </div>
            
                <div class="bg-indigo-100 p-6 rounded-xl">
                    <h3 class="font-bold text-xl mb-3 text-indigo-900">D) Darwin Correspondence Project</h3>
                    <p class="text-sm text-indigo-800 mb-4">
                        Authority entries generated from the project's online dataset resulted in roughly 600 pairs of matched entries across datasets.
                    </p>
                    <div id="darwin-container" class="grid grid-cols-1 gap-2">
                        <div class="animate-pulse text-gray-400 text-xs">Loading matches...</div>
                    </div>
                </div>
            </div> <div class="mb-16">
                <div class="border-l-4 border-red-600 pl-6 mb-6">
                    <h3 class="text-2xl font-bold mb-3">E) Wikidata Link Accuracy Check</h3>
                    <p class="text-gray-700 mb-4">
                        Using a pipeline with <strong>Google Gemini</strong>, we assessed the accuracy of Wikidata identifiers associated with people and companies in the Mimsy dataset. The evaluation identified 222 wrong links, nearly half of which were caused by the non-existence of a relevant Wikidata page.
                    </p>
                    <div class="bg-red-50 p-4 rounded-lg text-sm italic text-red-900">
                        <strong>Future Work:</strong> Creating new Wikidata/Wikipedia pages for missing entities and using local LLMs for future matching tasks.
                    </div>
                </div>
                <div id="wikidata-errors-container" class="json-grid">
                    <div class="animate-pulse text-gray-400">Evaluating links...</div>
                </div>
            </div>

            <div class="mb-16">
                <div class="border-l-4 border-teal-600 pl-6 mb-6">
                    <h3 class="text-2xl font-bold mb-3">F) Duplicate Entry Identification</h3>
                    <p class="text-gray-700 mb-4">
                        A digital application was created to identify potential duplicate entries within Collections Online records. By combining fuzzy matching with LLM-based evaluation, we identified 665 pairs of entries with a very high likelihood of being duplicates.
                    </p>
                    <div class="bg-teal-50 p-4 rounded-lg text-sm italic text-teal-900">
                        <strong>Future Work:</strong> Extending the duplicate identification logic to individual-level records across the full collection.
                    </div>
                </div>
                <div id="co-duplicates-container" class="json-grid">
                    <div class="animate-pulse text-gray-400">Searching for duplicates...</div>
                </div>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="section-3" class="pb-20">
            <h2 class="text-4xl font-bold mb-12 text-indigo-900">3. SMG Journal Analysis</h2>

            <div class="mb-16">
                <div class="border-l-4 border-amber-600 pl-6 mb-8">
                    <h3 class="text-2xl font-bold mb-4">A) Identifying Objects with References</h3>
                    <p class="text-lg text-gray-700 mb-6">
                        Several LLM models were tested for identifying objects referred to in the Science Museum Group Journal (SMGJ). 
                        Key challenges included distinguishing museum collection objects from figurative references and managing inconsistent referencing standards in existing texts and images.
                    </p>
                    <div class="bg-amber-50 p-5 rounded-lg border border-amber-100">
                        <h4 class="font-bold text-amber-800 mb-2">Technical Obstacles & Outcomes:</h4>
                        <p class="text-amber-900 text-sm leading-relaxed italic">
                            Initial tests with Gemini resulted in two specialized lists: one for all collection-specific objects identified in texts, and another linking identified objects with their quoted reference numbers.
                        </p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 mt-10">
                    <div>
                        <h4 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Object Mentions: smgj_mentions.json</h4>
                        <div id="smgj-mentions-container" class="space-y-3">
                            <div class="animate-pulse text-gray-400 text-xs">Parsing article mentions...</div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Sentence Extraction: smgj_sentences.json</h4>
                        <div id="smgj-sentences-container" class="space-y-3">
                            <div class="animate-pulse text-gray-400 text-xs">Parsing sentences...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-gray-200">

        <section id="section-4" class="pb-20">
            <h2 class="text-4xl font-bold mb-12 text-indigo-900">4. Historic Catalogues</h2>

            <div class="mb-16">
                <div class="border-l-4 border-slate-600 pl-6 mb-8">
                    <h3 class="text-2xl font-bold mb-4">A) Digitised Historic Catalogues</h3>
                    <p class="text-lg text-gray-700 mb-6">
                        A survey was undertaken to identify and download digitised versions of historic Science Museum Catalogues acquired from the curatorial team. 
                    </p>
                </div>

                <h4 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-4">Catalogue Survey Sample: museum_catalogues.json</h4>
                <div id="catalogues-container" class="json-grid">
                    <div class="animate-pulse text-gray-400 text-xs">Loading catalogue list...</div>
                </div>
            </div>

            <div class="mb-16">
                <div class="border-l-4 border-cyan-600 pl-6 mb-8">
                    <h3 class="text-2xl font-bold mb-4">B) Catalogue Transformation Pipeline</h3>
                    <p class="text-lg text-gray-700 mb-6">
                        A pipeline was developed to transform images and PDFs of historic catalogues into structured datasets, incorporating entity and schema information extraction.
                    </p>
                </div>

                <div class="bg-cyan-50 p-6 rounded-xl border border-cyan-100 flex flex-col md:flex-row items-center justify-between gap-6">
                    <div>
                        <h4 class="font-bold text-cyan-900 mb-2">Technical Implementation</h4>
                        <p class="text-cyan-800 text-sm italic">
                            The resulting datasets were made available via SharePoint and a visual catalogue explorer on GitHub.
                        </p>
                    </div>
                    <a href="https://github.com/third-floor/SMG-Digital-Applications_review/blob/main/4_B_Catalogue_Transformation.ipynb" 
                       target="_blank" 
                       class="whitespace-nowrap inline-flex items-center px-6 py-3 bg-cyan-700 text-white rounded-lg hover:bg-cyan-800 transition shadow-md">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.041-1.412-4.041-1.412-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        View Transformation Pipeline
                    </a>
                </div>
            </div>
        </section>

    </main>

    <script>
        /**
         * Helper to fetch and clean JSON data that might contain invalid 'NaN' tokens.
         */
        async function fetchCleanJson(fileName) {
            const response = await fetch(fileName);
            if (!response.ok) throw new Error(`Could not fetch ${fileName}`);
        
            const text = await response.text();
            // Replace invalid NaN tokens with null for standard JSON parsing
            const cleanText = text.replace(/:\s*NaN/g, ': null');
            return JSON.parse(cleanText);
        }

        /**
         * Section 1-A: Renders the Places dataset sample.
         */
        async function loadPlaces() {
            try {
                const data = await fetchCleanJson('places.json');
                const container = document.getElementById('places-container');
                container.innerHTML = ''; 

                data.slice(0, 6).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'data-card text-sm';
                    card.innerHTML = `
                        <p class="font-bold text-indigo-700 text-base">${item['PLACE.PLACE1'] || 'Unknown'}</p>
                        <p class="text-gray-500 italic mb-2">${item['PLACE.DESCRIPTION'] || 'No description available'}</p>
                        <div class="grid grid-cols-2 gap-1 text-xs">
                            <span class="text-gray-400 font-medium">Coordinates:</span> 
                            <span>${item.Latitude ?? 'N/A'}, ${item.Longitude ?? 'N/A'}</span>
                            <span class="text-gray-400 font-medium">Getty ID:</span> 
                            <a href="${item.LINK || '#'}" target="_blank" class="text-blue-500 hover:underline">
                                ${item.TGN_ID2 || 'View Link'}
                            </a>
                        </div>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error('Error loading places:', error);
                document.getElementById('places-container').innerHTML = `<p class="text-red-500">Error: ${error.message}</p>`;
            }
        }

        /**
         * Section 2: Renders samples from the People Matching datasets (RS and Darwin).
         */
        async function loadPeopleData(fileName, containerId) {
            try {
                const data = await fetchCleanJson(fileName);
                const container = document.getElementById(containerId);
                container.innerHTML = '';

                // Render the first 4 entries as a preview
                data.slice(0, 4).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'data-card text-xs border-l-2 border-indigo-300';
                
                    // Display logic for birth/death years
                    const birth = item.InputBirth ?? '?';
                    const death = item.InputDeath ?? '?';
                
                    card.innerHTML = `
                        <p class="font-bold text-gray-800 text-sm">${item.MatchedName || item.InputName || 'Unknown Record'}</p>
                        <p class="text-gray-500 mb-1">Dates: ${birth} - ${death}</p>
                        <p class="text-gray-600 line-clamp-3">${item.InputDescription || item['brief bio'] || 'No description available.'}</p>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error(`Error loading ${fileName}:`, error);
                document.getElementById(containerId).innerHTML = `<p class="text-red-400 text-xs italic">Data sample currently unavailable.</p>`;
            }
        }
            
        /**
         * Specialized rendering for LLM-evaluation datasets (Sections E and F)
         */
        async function loadLLMEvals(fileName, containerId, type) {
            try {
                const data = await fetchCleanJson(fileName);
                const container = document.getElementById(containerId);
                container.innerHTML = '';

                data.slice(0, 4).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'data-card text-xs border-l-2 ' + 
                                    (type === 'error' ? 'border-red-400' : 'border-teal-400');
                
                    let content = '';
                    if (type === 'error') {
                        // Formatting for Wikidata Errors
                        content = `
                            <p class="font-bold text-red-800 text-sm">${item['summary.title'] || 'Unknown Entity'}</p>
                            <p class="text-gray-500 mb-1">ID: ${item['cp_number'] || 'N/A'}</p>
                            <p class="text-gray-600 italic line-clamp-3 mb-2">"${item['Response_Text'].split('\n').pop()}"</p>
                            <span class="bg-red-100 text-red-700 px-2 py-0.5 rounded text-[10px] font-bold uppercase">
                                ${item['LINKAGE_NOTE_OR_CORRECT_LINK'] || 'Mismatch Identified'}
                            </span>
                        `;
                    } else {
                        // Formatting for Duplicates
                        content = `
                            <p class="font-bold text-teal-800 text-sm">${item['summary.title']}</p>
                            <p class="text-gray-500 mb-1">Matched with: ${item['ap.summary.title']}</p>
                            <p class="text-gray-600 line-clamp-3 italic">"${item['Response_Text'].split('\n')[0]} - ${item['Response_Text'].split('\n').pop()}"</p>
                        `;
                    }
                
                    card.innerHTML = content;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error(`Error loading ${fileName}:`, error);
                document.getElementById(containerId).innerHTML = `<p class="text-red-400 text-xs italic">Evaluation data unavailable.</p>`;
            }
        }

        /**
         * Specialized rendering for SMGJ Journal Analysis (Section 3)
         */
        async function loadSMGJData() {
            try {
                // Load Mentions
                const mentionsData = await fetchCleanJson('smgj_mentions.json');
                const mentionsContainer = document.getElementById('smgj-mentions-container');
                mentionsContainer.innerHTML = '';
    
                mentionsData.slice(0, 3).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'data-card text-xs border-l-2 border-amber-400 bg-white';
                    card.innerHTML = `
                        <p class="font-bold text-amber-800 text-sm">${item['Object identified'] || 'Unspecified Object'}</p>
                        <p class="text-gray-500 mb-2 font-medium">Article: ${item['Article short name']}</p>
                        <p class="text-gray-600 italic line-clamp-3 bg-gray-50 p-2 rounded">
                            ${item['Relevant (part of sentence) where it is mentioned'] || 'Context unavailable.'}
                        </p>
                    `;
                    mentionsContainer.appendChild(card);
                });

                // Load Sentences
                const sentencesData = await fetchCleanJson('smgj_sentences.json');
                const sentencesContainer = document.getElementById('smgj-sentences-container');
                sentencesContainer.innerHTML = '';

                sentencesData.slice(0, 3).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'data-card text-xs border-l-2 border-gray-300 bg-white';
                    card.innerHTML = `
                        <p class="font-bold text-gray-700 text-sm mb-1">${item['Author_Title'] || 'Untitled Article'}</p>
                        <p class="text-gray-500 line-clamp-4 leading-relaxed">${item['Sentence'] || 'Sentence data missing.'}</p>
                    `;
                    sentencesContainer.appendChild(card);
                });

            } catch (error) {
                console.error('Error loading SMGJ data:', error);
                const errorMsg = `<p class="text-red-400 text-xs italic">Journal data sample unavailable.</p>`;
                document.getElementById('smgj-mentions-container').innerHTML = errorMsg;
                document.getElementById('smgj-sentences-container').innerHTML = errorMsg;
            }
        }

        /**
     * Section 4: Renders the Historic Catalogues dataset sample.
     */
    async function loadCatalogueData() {
        try {
            const data = await fetchCleanJson('museum_catalogues.json');
            const container = document.getElementById('catalogues-container');
            container.innerHTML = '';

            data.slice(0, 6).forEach(item => {
                const card = document.createElement('div');
                card.className = 'data-card text-sm border-l-2 border-slate-400 bg-white';
                
                // Assuming fields based on typical catalogue metadata
                const title = item['Column2'] || 'Untitled Catalogue';
                const year = item['Column3'] || 'N/A';
                const link = item['LINK'];

                card.innerHTML = `
                    <p class="font-bold text-slate-800 text-base mb-1">${title}</p>
                    <p class="text-slate-500 mb-3 italic">Published: ${year}</p>
                    ${link ? `
                    <a href="${link}" target="_blank" class="text-cyan-600 hover:underline text-xs font-semibold flex items-center">
                        View Digitised Copy
                        <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                    </a>` : '<span class="text-gray-400 text-xs italic">Digital link unavailable</span>'}
                `;
                container.appendChild(card);
            });
        } catch (error) {
            console.error('Error loading catalogues:', error);
            document.getElementById('catalogues-container').innerHTML = `<p class="text-red-400 text-xs italic">Catalogue data unavailable.</p>`;
        }
    }

    //combined window.onload
    window.onload = function() {
        loadPlaces();
        loadPeopleData('rs_people_matches.json', 'rs-fellows-container');
        loadPeopleData('darwin_people_matches.json', 'darwin-container');
        loadLLMEvals('wikidata_errors.json', 'wikidata-errors-container', 'error');
        loadLLMEvals('co_people_matches.json', 'co-duplicates-container', 'duplicate');
        loadSMGJData();
        loadCatalogueData();
    };

    </script>
</body>
</html>
